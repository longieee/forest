<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="default.xsl"?>
<fr:tree toc="true" numbered="true" show-heading="true" show-metadata="true" expanded="true" root="false" xmlns:fr="http://www.jonmsterling.com/jms-005P.xml">
  <fr:frontmatter>
    <fr:anchor>243</fr:anchor>
    <fr:addr type="user">De Montmort's matching problem</fr:addr>
    <fr:route>De Montmort's matching problem.xml</fr:route>
    <fr:title text="De Montmort's matching problem">De Montmort's matching problem</fr:title>
    <fr:taxon>Definition</fr:taxon>
    <fr:date>
      <fr:year>2025</fr:year>
      <fr:month>5</fr:month>
      <fr:day>26</fr:day>
    </fr:date>
    <fr:authors>
      <fr:author>Long Nguyen</fr:author>
    </fr:authors>
  </fr:frontmatter>
  <fr:mainmatter>
    <fr:p>#math #probability #named-problem</fr:p>
    <fr:p><fr:strong>Problem statement</fr:strong> Consider a well-shuffled deck of <fr:tex display="inline"><![CDATA[n]]></fr:tex> cards, labeled <fr:tex display="inline"><![CDATA[1]]></fr:tex> through <fr:tex display="inline"><![CDATA[n]]></fr:tex>. You flip over the cards one by one, saying the numbers 1 through n as you do so. You win the game if, at some point, the number you say aloud is the same as the number on the card being flipped over (). What is the probability of winning?</fr:p>
    <fr:p>
      <fr:strong>Solution</fr:strong>
    </fr:p>
    <fr:p>Let <fr:tex display="inline"><![CDATA[A_j]]></fr:tex> be the event that the <fr:tex display="inline"><![CDATA[i]]></fr:tex>th card in the deck has the number <fr:tex display="inline"><![CDATA[i]]></fr:tex> written on it. We are interested in the probability of the union <fr:tex display="inline"><![CDATA[A_1 \cup  \dots  \cup  A_n]]></fr:tex>: as long as at least one of the cards has a number matching its position in the deck, you will win the game</fr:p>
    <fr:p>To find the probability of the union, we'll use <fr:em><fr:link type="external" href="/Users/longie/forest/trees/Probability/Inclusion-exclusion.tree">Inclusion-exclusion</fr:link></fr:em>. 
First, <fr:tex display="inline"><![CDATA[$$ P(A_i) = 1/n $$]]></fr:tex> for all <fr:tex display="inline"><![CDATA[i]]></fr:tex>. One way to see this is with the naive definition of probability, using the full sample space: there are <fr:tex display="inline"><![CDATA[n!]]></fr:tex> possible orderings of the deck, all equally likely, and <fr:tex display="inline"><![CDATA[(n-1)!]]></fr:tex> of these are favorable to <fr:tex display="inline"><![CDATA[A_i]]></fr:tex> (fix the card numbered <fr:tex display="inline"><![CDATA[i]]></fr:tex> to be in the ith position in the deck, and then the remaining <fr:tex display="inline"><![CDATA[n-1]]></fr:tex> cards can be in any order). Another way to see this is by symmetry: the card numbered <fr:tex display="inline"><![CDATA[i]]></fr:tex> is equally likely to be in any of the <fr:tex display="inline"><![CDATA[n]]></fr:tex> positions in the deck, so it has probability <fr:tex display="inline"><![CDATA[1/n]]></fr:tex> of being in the <fr:tex display="inline"><![CDATA[i~]]></fr:tex>th spot.  
Second, <fr:tex display="inline"><![CDATA[$$ P(A_i \cap  A_j) = \frac {(n-2)!}{n!} = \frac {1}{n(n-1)} $$]]></fr:tex>since we require the cards numbered <fr:tex display="inline"><![CDATA[i]]></fr:tex> and <fr:tex display="inline"><![CDATA[j]]></fr:tex> to be in the <fr:tex display="inline"><![CDATA[i~]]></fr:tex>th and <fr:tex display="inline"><![CDATA[j~]]></fr:tex> spots in the deck and allow the remaining <fr:tex display="inline"><![CDATA[n-2]]></fr:tex> cards to be in any order, so <fr:tex display="inline"><![CDATA[(n-2)!]]></fr:tex> out of <fr:tex display="inline"><![CDATA[n!]]></fr:tex> possibilities are favorable to <fr:tex display="inline"><![CDATA[A_i \cap  A_j]]></fr:tex></fr:p>
    <fr:p>Similarly, <fr:tex display="inline"><![CDATA[$$ P(A_i \cap  A_j \cap  A_k) = \frac {1}{n(n-1)(n-2)} $$]]></fr:tex>and the pattern continues for intersections of 4 events, etc.</fr:p>
    <fr:p>In the <fr:em><fr:link type="external" href="/Users/longie/forest/trees/Probability/Inclusion-exclusion.tree">Inclusion-exclusion</fr:link></fr:em> formula, there are <fr:tex display="inline"><![CDATA[n]]></fr:tex> terms involving one event, <fr:tex display="inline"><![CDATA[n\choose 2]]></fr:tex> terms involving 2 events, <fr:tex display="inline"><![CDATA[n\choose 3]]></fr:tex> terms involving 3 events, and so forth. By the symmetry of the problem, all <fr:tex display="inline"><![CDATA[n]]></fr:tex> terms of the form <fr:tex display="inline"><![CDATA[P(A_i)]]></fr:tex> are equal, all <fr:tex display="inline"><![CDATA[n\choose 2]]></fr:tex> terms of the form <fr:tex display="inline"><![CDATA[P(A_i\cap  A_j)]]></fr:tex> are equal, and the whole expression simplifies considerably: 
<fr:tex display="inline"><![CDATA[$$ \begin {aligned} P(\bigcup _{i=1}^kA_i) &= \frac {n}{n} - \frac {n\choose 2}{n(n-1)} + \frac {n\choose 3}{n(n-1)(n-2)}  - \dots  + (-1)^{n+1} \times  \frac {1}{n!} \\ &= 1 - \frac {1}{2!} + \frac {1}{3!} - \dots  + (-1)^{n+1} \times  \frac {1}{n!} \end {aligned} $$]]></fr:tex></fr:p>
    <fr:p>As <fr:tex display="inline"><![CDATA[n \longrightarrow  \infty $]]></fr:tex> , we can see that this probability approaches <fr:tex display="inline"><![CDATA[e^{-1}$]]></fr:tex>, from looking at the Taylor series for <fr:tex display="inline"><![CDATA[$\frac {1}{e}$]]></fr:tex></fr:p>
  </fr:mainmatter>
  <fr:backmatter />
</fr:tree>
